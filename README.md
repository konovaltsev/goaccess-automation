# Скрипт автоматизации запуска GoAccess по cron

Установите корректные значения переменных для вашего сервера:

```
LOG_LIST_FILE='/root/goaccess/logs'
LOG_DIR='/var/log/apache2'
HTML_DIR='/var/www/html/goaccess'
```

Скрипт читает файл `LOG_LIST_FILE`, и для каждого указанного там имени вызывает создание отчета средствами `goaccess`. Скрипт склеивает лог файлы (в том числе архивированные .gz) вида:
`LOG_DIR/ИМЯ.log`
`LOG_DIR/ИМЯ.log.ЧИСЛО`
`LOG_DIR/ИМЯ.log.ЧИСЛО.gz`
и отправляет всё содержимое команде `goaccess`, которая сохраняет отчет по пути `HTML_DIR/ИМЯ.html`

Так же формируется файд `HTML_DIR/index.html` со списком сгенерированных отчетов (с указанием размеров) с ссылками.

Настройте запуск по расписанию по своему желанию.
Например, отредактированный скрипт можно просто скопировать в `/etc/cron.hourly` или `/etc/cron.daily`.

В дальнейшем достаточно отредактировать файл `LOG_LIST_FILE`, чтобы стали формироваться отчеты по новым лог-файлам.

В каждой строке файла `LOG_LIST_FILE` может быть указано имя лога (без завершающего `.log`), либо имя и через пробел формат (для команды `goaccess`) лога. Если формат лога не указан, то используется формат `COMBINED`.

Перевод строки в конце последней записи в файле обязателен.

Пример файла списка логов:
```
my.virtual.host-access
other_vhosts_access VCOMBINED
```
